# ============================================================
# AI Face Recognition & Face Swap - Environment Variables
# Copy this file to .env and fill in your values:
#   cp .env.example .env
# ============================================================

# ------ Application -----------------------------------------
APP_NAME="AI Face Recognition & Swap"
APP_VERSION="1.0.0"
APP_ENV=development        # development | staging | production
DEBUG=true
LOG_LEVEL=INFO             # DEBUG | INFO | WARNING | ERROR | CRITICAL

# ------ API Server ------------------------------------------
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=1              # Increase for production
API_RELOAD=true            # Hot-reload in development only
API_PREFIX=/api/v1
CORS_ORIGINS=["http://localhost:8501","http://localhost:3000"]

# ------ Streamlit UI ----------------------------------------
UI_HOST=0.0.0.0
UI_PORT=8501

# ------ Model Paths -----------------------------------------
MODELS_DIR=./models
YOLO_MODEL_PATH=./models/yolov8n-face.pt
INSIGHTFACE_MODEL_DIR=./models/buffalo_l
INSWAPPER_MODEL_PATH=./models/inswapper_128.onnx
GFPGAN_MODEL_PATH=./models/GFPGANv1.4.pth
CODEFORMER_MODEL_PATH=./models/codeformer.pth

# ------ Inference / Hardware --------------------------------
# Options: cuda  |  cpu  |  mps (Apple Silicon)
EXECUTION_PROVIDER=cuda
DEVICE_ID=0                # GPU device index (0 = first GPU)
# Set to cpu if no GPU is available
# EXECUTION_PROVIDER=cpu

# ------ YOLOv8 Detection ------------------------------------
YOLO_CONFIDENCE_THRESHOLD=0.5
YOLO_IOU_THRESHOLD=0.45
YOLO_IMG_SIZE=640          # Input resolution for detection
YOLO_MAX_FACES=10          # Max faces to detect per frame

# ------ Face Recognition ------------------------------------
RECOGNITION_SIMILARITY_THRESHOLD=0.45   # Cosine similarity cutoff (0-1)
RECOGNITION_EMBEDDING_SIZE=512
FACE_DATABASE_PATH=./data/face_database.pkl

# ------ Face Swap -------------------------------------------
SWAP_INPUT_SIZE=128        # inswapper_128 fixed input size
SWAP_BLEND_ALPHA=1.0       # Blending strength (0.0 - 1.0)

# ------ Face Enhancement ------------------------------------
ENHANCE_ENABLED=true
ENHANCER_BACKEND=gfpgan    # gfpgan | codeformer
GFPGAN_UPSCALE=1           # 1 = no upscale, 2 = 2x
CODEFORMER_FIDELITY=0.5    # 0.0 = quality | 1.0 = identity fidelity

# ------ Video Processing ------------------------------------
VIDEO_FPS_LIMIT=30         # Max FPS to process
VIDEO_FRAME_SKIP=0         # Skip N frames between each processed frame
VIDEO_OUTPUT_CODEC=mp4v    # mp4v | XVID | H264

# ------ File Upload -----------------------------------------
MAX_UPLOAD_SIZE_MB=50
ALLOWED_IMAGE_TYPES=["image/jpeg","image/png","image/webp","image/bmp"]
ALLOWED_VIDEO_TYPES=["video/mp4","video/avi","video/mov","video/mkv"]
UPLOAD_DIR=./uploads
OUTPUT_DIR=./output

# ------ Ethics & Safety -------------------------------------
CONSENT_MODE=true          # Require consent flag on all swap requests
WATERMARK_ENABLED=true     # Stamp AI-generated watermark on outputs
WATERMARK_TEXT="AI Generated"

# ------ Logging & Monitoring --------------------------------
LOG_DIR=./logs
LOG_ROTATION=10 MB         # Rotate log file after this size
LOG_RETENTION=7 days       # Keep logs for N days

# ------ Security --------------------------------------------
# Secret key for API token signing â€” MUST be changed before deployment!
# Generate one with: python -c "import secrets; print(secrets.token_urlsafe(64))"
SECRET_KEY=
# Comma-separated API keys for X-API-Key header auth (empty = auth disabled)
# Generate one with: python -c "import secrets; print(secrets.token_urlsafe(32))"
API_KEYS=

# ------ Upload constraints ----------------------------------
API_MAX_UPLOAD_BYTES=10485760  # 10 MB
API_MAX_IMAGE_DIMENSION=4096
API_MIN_IMAGE_DIMENSION=10
